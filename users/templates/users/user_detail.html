{% extends 'restaurant/base.html'%}
{% load static %}
{% load my_tags %}
{% block content %}

<div class="row text-right">

    <div class="col-12">

        <div class="card mb-3 box-shadow">
            <div class="card-header">
                <h4 class="my-0 font-weight-normal">Информация о пользователе</h4>
            </div>


            <div class="card-body">
                <h5 class="card-title">
                    <div style="color: orange"><b>{{object.name}}</b></div>
                </h5>
                <p class="card-text">

                    <img src="{{ object.avatar|user_media_filter }}" width="100"
                         alt={{object.avatar|user_media_filter}}> <br>
                    <b>Имя:</b> {{object.name}} <br>
                    <b>Email:</b> {{object.email}} <br>
                    <b>Телефон:</b> {{object.phone_number}} <br>
                    <b>Телеграм:</b> {{object.tg_nick}} {{object.tg_chat_id}}<br>

                <hr>
                <h5 class="card-title">
                    <div style="color: orange"><b>Список бронирований пользователя:</b></div>
                </h5>

                <table class="table table-stripped">
                    <tr>

                        <th>Пользователь</th>
                        <th>Столик</th>

                        <th>Дата</th>
                        <th>Время</th>

                        <th>Напомнить за</th>
                        <th>Дата создания</th>

                        <th>Активно</th>
                        <th>Информация</th>
                        <th>Изменить</th>
                        <th>Удалить</th>


                    </tr>

                    {% for object in booking_list %}
                    <tr>

                        <td>{{object.user}}</td>
                        <td>{{object.table}}, {{object.places}} места</td>

                        <td>{{object.date_field}}</td>
                        <td>{{object.time_start}} - {{object.time_end}}</td>

                        <td>
                            {% if object.notification == 0 %}
                            ---
                            {% else %}
                            {% if object.notification == 1 %}
                            {{object.notification}} час
                            {% else %}
                            {{object.notification}} часа
                            {% endif %}
                            {%endif%}


                        </td>
                        <td>{{object.created_at}}</td>


                        <td>
                            {%if object.active %}
                            <a class="btn btn-success" href="{%url 'restaurant:booking_activity' object.pk%}"
                               role="button">Деактивировать</a>
                            {% else %}
                            <a class="btn btn-danger" href="{%url 'restaurant:booking_activity' object.pk%}"
                               role="button">&nbsp;&nbsp;Активировать&nbsp;&nbsp;</a>
                            {%endif%}
                        </td>
                        <td>
                            <a class="btn btn-primary" href="{%url 'restaurant:booking_detail' object.pk%}"
                               role="button">Информация</a>
                        </td>
                        <td>
                            <a class="btn btn-primary" href="{%url 'restaurant:booking_update' object.pk%}"
                               role="button">Изменить</a>
                        </td>
                        <td>
                            <a class="btn btn-primary" href="{%url 'restaurant:booking_delete' object.pk%}"
                               role="button">Удалить</a>
                        </td>


                        {% endfor %}

                </table>


                </p>
                <div class="btn-group">
                    <a class="p-2 btn btn-outline-primary" href="{% url 'restaurant:main' %}" role="button">На главную
                        страницу</a>
                    &nbsp;
                    <a class="p-2 btn btn-outline-primary" href="{% url 'restaurant:booking_create' %}" role="button">Добавить
                        бронирование</a>


                </div>
                <br>


            </div>


        </div>


    </div>


</div>

{% endblock %}